<!DOCTYPE html>
<html lang="ja">
    <body>
        <h1>FIZZBUZZ問題</h1>
        <div class="container" style='width: 300px; height: 80px; position:relative;'>
          <tr>
            <td align="right"><b style='line-height: 150%;'>FizzNum:</b></td>
            <td><input id="fizz" type="text" name="fizz" size="30" maxlength="20" style='position:absolute; right:0; top:0;height:20px;' placeholder="整数値を入力してください"></td>
          </tr>
          <tr>
            <td align="right"><b style='position:absolute;top:60%;left:0; line-height: 140%;'>BuzzNum:</b></td>
            <td><input id="buzz" type="text" name="buzz" size="30" maxlength="20" style='position:absolute; right:0; top:60%;height:20px;' placeholder="整数値を入力してください"></td>
          </tr>
          <button type="submit" id="btn" style='width: 50px; position:absolute; top: 100%; left: 0;'>実行</button>
          <p style='position:absolute; top:100px;'>出力</p>
          <div id="table" style='position:absolute;top:140px;width:50px;height:100px;'></div>
        </div>
<script>
  const btn = document.getElementById('btn');
  const fizz = document.getElementById('fizz');
  const buzz = document.getElementById('buzz');
  const table = document.getElementById('table');

  class FizzBuzz {
    constructor(f, name){
      this.figure = f;
      this.name = name;
    }
    //入力された数字の2倍で100以内の配列
    multiple(){
      let fbArray = [];
      let twiced = 0;
      for (let i=1; i<20; i++) {
        if (i===1){
          twiced = this.figure;
          console.log(twiced);
        } else {
          twiced = parseInt(twiced) + parseInt(this.figure);
          console.log(twiced);
        }
        if (twiced<100){
          fbArray[i-1] = [this.name,twiced];
        }
      }
      return fbArray;
    }
  }
  //配列を結合
  class FizzBuzzSort {
    constructor(f, b){
      this.fizz = f;
      this.buzz = b;
      
    }
    concat(){
      let concat = this.fizz.concat(this.buzz)
      return concat; 
    }
  }

  class WriteTable {
    constructor(sortedArray, table){
      this.array = sortedArray;
      this.table = table;
      
    }
    wTable(){

      console.log(this.array.length);
      this.table.innerText = "";
      var deplicateArray = [];
      for (var i=0; i<this.array.length-1; i++){
        if (parseInt(this.array[i][1])===parseInt(this.array[i+1][1])){
          var aaa = this.array[i];
          console.log(aaa);
          //pushが効かない
          deplicateArray[i] = aaa;
          //this.dArray.push = aaa;
        }
      } 
      console.log(deplicateArray);

      
      for (let i=0; i<this.array.length;i++){
        //for (let j=0; j<deplicateArray.length; j++){
          if (deplicateArray[i]){
            this.table.textContent += 'FizzBuzz' + '\0' + this.array[i][1] + '\n';
            i++;
          } else {
          //半角スペースをつけるのに四苦八苦
          this.table.textContent += this.array[i][0] + '\0' + this.array[i][1] + '\n';
          }
        //}
      }
      return this.table;
      
    }
  }

  class CheckInt {
    constructor(f){
      this.f = f;
    }
    check(){
      if (parseInt(this.f)){
        console.log(typeof this.f);
        return true;
      } else if (this.f === '') {
        console.log(typeof this.f);
        return false;
      } else {
        return false;
      }
    }
  }
  
  btn.addEventListener('click', function(e){
    
    let fzFigure = new FizzBuzz(fizz.value, 'Fizz');
    let bzFigure = new FizzBuzz(buzz.value, 'Buzz');
    let fCheckInt = new CheckInt(fizz.value);
    let bCheckInt = new CheckInt(buzz.value);
    if (!fCheckInt.check()){
      table.style.width = '300px';
      table.textContent = '整数値を入力してください';
      return;
    }
    if (!bCheckInt.check()){
      table.style.width = '300px';
      table.textContent = '整数値を入力してください';
      return;
    }
    let fzFig = fzFigure.multiple();
    let bzFig = bzFigure.multiple();
    let initArray = new FizzBuzzSort(fzFig, bzFig);
    //配列を昇順に
    let concatArray = initArray.concat();
    concatArray.sort(function(a, b){
      return a[1] -b[1];
    });
    //console.log(concatArray);
    table.style.width = '50px';
    let writeTable = new WriteTable(concatArray, table);
    writeTable.wTable();
    //console.log(aaa);
  });
</script>
    </body>
</html>